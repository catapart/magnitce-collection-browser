var v=`:host\r
{\r
    --border-color: rgb(205 205 205);\r
\r
    display: grid;\r
    border: solid 1px var(--border-color);\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --border-color: rgb(81 81 81);\r
    }\r
}\r
\r
[part="navigation"]\r
{\r
    border-right: solid 1px var(--border-color);\r
}\r
[part="categories"] > ::slotted(*)\r
{\r
    padding: var(--category-padding, 5px 15px);\r
}\r
\r
[part="gallery"]\r
{\r
    margin: 0;\r
    display: grid;\r
    grid-template-rows: auto 1fr;\r
    /* gap: 1em; */\r
    user-select: none;\r
    overflow: auto;\r
}\r
\r
[part="header"]\r
{\r
    display: grid;\r
    grid-template-columns: 1fr auto;\r
    align-items: center;\r
\r
    border-bottom: solid 1px var(--border-color);\r
}\r
\r
[part="items"]\r
{\r
    padding: 0;\r
    margin: 0;\r
    list-style: none;\r
\r
    display: grid;\r
    grid-template-columns: repeat(auto-fill, var(--item-width, minmax(0, 100px)));\r
    /* grid-column-gap: var(--column-gap, 1em);\r
    grid-row-gap: var(--row-gap, 1em); */\r
}\r
\r
\r
::slotted(:not([slot]))\r
{\r
    border: solid 1px transparent;\r
    margin: 3px 7px;\r
}\r
\r
::slotted(:not([slot]):focus)\r
{\r
    border-color: rgb(205 205 205);\r
}\r
::slotted(:not([slot]):hover)\r
{\r
    background-color: var(--background-color-hover, rgb(221, 221, 221));\r
}\r
::slotted(:not([slot]).selected)\r
{\r
    background-color: var(--background-color-selected, highlight);\r
    color: var(--color-selected, highlighttext);\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    ::slotted(:not([slot]):hover)\r
    {\r
        --background-color-hover: rgb(197, 197, 197);\r
    }\r
}\r
\r
[part="add-button"]\r
{\r
    align-self: center;\r
    justify-self: flex-end;\r
    margin: .5em 1em;\r
}\r
\r
\r
@media (max-width: 800px) \r
{\r
    \r
}\r
@media (min-width: 800px) \r
{\r
    :host\r
    {\r
        display: grid;\r
        grid-template-columns: auto 1fr;\r
    }\r
}`;var b=`<nav part="navigation">\r
    <slot name="navigation-header">\r
        <header part="navigation-header">\r
            <slot name="navigation-header-content"></slot>\r
        </header>\r
    </slot>\r
    <selectable-items part="categories"><slot name="category"></slot></selectable-items>\r
</nav>\r
<div part="gallery">\r
    <slot name="header">\r
        <header part="header">\r
            <slot name="header-content">\r
            </slot>\r
            <slot name="add-button">\r
                <button part="add-button">\r
                    <slot name="add-button-content">\r
                        <span part="add-button-icon">+</span>\r
                        <span part="add-button-label">Add Item</span>\r
                    </slot>\r
                </button>\r
            </slot>\r
        </header>\r
    </slot>\r
    <div part="items">\r
        <slot></slot>\r
    </div>\r
</div>`;var T=`:host { user-select: none; }
::slotted(*)
{
    user-select: none;
    cursor: pointer;
}
::slotted(:hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted(.selected)
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}`,S=new CSSStyleSheet;S.replaceSync(T);document.addEventListener("keydown",n=>{if(u.multipleModifierKeys.indexOf(n.code)>-1){u._multipleModifierActive=!0;return}});document.addEventListener("keyup",n=>{u.multipleModifierKeys.indexOf(n.code)>-1&&(u._multipleModifierActive=u.multipleModifierActive)});var E="selectable-items",u=class d extends HTMLElement{static observedAttributes=[];static _multipleModifierActive=!1;static multipleModifierKeys=["ShiftLeft","ShiftRight","ControlLeft","ControlRight"];static multipleModifierActive=!1;static selectKeys=["Enter","Space"];static selectedClassName="selected";selected=()=>[...this.querySelectorAll(`.${d.selectedClassName}`)];handledItems=new WeakSet;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<slot></slot>",this.shadowRoot.adoptedStyleSheets.push(S),this.shadowRoot.querySelector("slot").addEventListener("slotchange",o=>{let t=o.target.assignedElements();for(let s=0;s<t.length;s++)this.handledItems.has(t[s])||t[s].tagName.toLowerCase()=="slot"||(t[s].setAttribute("tabIndex","0"),t[s].addEventListener("keydown",e=>{d.selectKeys.indexOf(e.code)>-1&&this.selectItem(e.currentTarget)}),t[s].addEventListener("click",e=>{this.selectItem(e.currentTarget)}),this.handledItems.add(t[s]))})}selectItem(o){let t=this.getAttribute("multiple")??this.getAttribute("multi");(d._multipleModifierActive==!1||t==null)&&[...(o.parentElement??this).children].reduce((e,a,h)=>(this.handledItems.has(a)&&a.classList.contains(d.selectedClassName)&&e.push(a),e),new Array).forEach(e=>e.classList.remove(d.selectedClassName)),o.classList.add(d.selectedClassName),this.dispatchEvent(new Event("change"))}};customElements.get(E)==null&&customElements.define(E,u);var x=(n=>n)(x||{}),L=new CSSStyleSheet;L.replaceSync(v);var y="collection-browser",f=class n extends HTMLElement{componentParts=new Map;getPart(o){if(this.componentParts.get(o)==null){let t=this.shadowRoot.querySelector(`[part="${o}"]`);t!=null&&this.componentParts.set(o,t)}return this.componentParts.get(o)}findPart(o){return this.shadowRoot.querySelector(`[part="${o}"]`)}get selected(){return this.#e()}#e=()=>[...this.shadowRoot.querySelector("slot:not([name])").assignedElements().reduce((o,t,s)=>(t.classList.contains("selected")&&o.push(t),o),new Array)];get allowMultiSelect(){return this.hasAttribute("multi")||this.hasAttribute("multiple")}handledItems=new WeakSet;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=b,this.shadowRoot.adoptedStyleSheets.push(L);let o=[];this.shadowRoot.querySelector("selectable-items").addEventListener("change",t=>{t.preventDefault(),t.stopPropagation();let e=[...this.querySelectorAll('[slot="category"]')].find(c=>c.classList.contains("selected")),a=new CustomEvent("category",{cancelable:!0,detail:{previousSelection:o,newSelection:e}}),h=this.dispatchEvent(a);if(e==null?o=[]:o=[e],h==!1||e==null)return;let i=e.dataset.category;if(i==null||i.trim()=="")return;this.dataset.category=i;let m=[...this.querySelectorAll(":not([slot])")];for(let c=0;c<m.length;c++){let r=m[c];if(r.classList.remove("has-category"),!(r.dataset.category==null||r.dataset.category.trim()==""))if(r.dataset.category==i)r.classList.add("has-category");else{let p=r.dataset.category.split(",");for(let l=0;l<p.length;l++)if(p[l]==i){r.classList.add("has-category");break}}}}),this.shadowRoot.querySelector("slot:not([name])").addEventListener("slotchange",t=>{let s=t.target.assignedElements();for(let e=0;e<s.length;e++)this.handledItems.has(s[e])||s[e].addEventListener("click",a=>{a.stopPropagation();let h=s.reduce((l,g,A)=>(g.classList.contains(n.selectedClassName)&&g!=s[e]&&l.push(g),l),new Array),i=a.getModifierState("Shift"),m=a.getModifierState("Control"),c=a.getModifierState("Alt"),r=new CustomEvent("change",{cancelable:!0,detail:{newSelection:s[e],previousSelection:h,shift:i,ctrl:m,alt:c}});if(this.dispatchEvent(r)!=!1){if(this.allowMultiSelect==!1)for(let l=0;l<h.length;l++)h[l].classList.remove(n.selectedClassName);s[e].classList.toggle(n.selectedClassName)}})})}static selectedClassName="selected";clearSelection(){this.dispatchEvent(new CustomEvent("change",{detail:{newSelection:null,previousSelection:this.selected,shift:!1,ctrl:!1,alt:!1}}))}};customElements.get(y)==null&&customElements.define(y,f);export{f as CollectionBrowserElement,x as CollectionBrowserParts};
