var f=`:host\r
{\r
    --border-color: rgb(205 205 205);\r
\r
    display: grid;\r
    border: solid 1px var(--border-color);\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --border-color: rgb(81 81 81);\r
    }\r
}\r
\r
[part="navigation"]\r
{\r
    border-right: solid 1px var(--border-color);\r
}\r
[part="categories"] > ::slotted(*)\r
{\r
    padding: var(--category-padding, 5px 15px);\r
}\r
\r
[part="gallery"]\r
{\r
    margin: 0;\r
    display: grid;\r
    grid-template-rows: auto 1fr;\r
    /* gap: 1em; */\r
    user-select: none;\r
    overflow: auto;\r
}\r
\r
[part="header"]\r
{\r
    display: grid;\r
    grid-template-columns: 1fr auto;\r
    align-items: center;\r
\r
    border-bottom: solid 1px var(--border-color);\r
}\r
\r
[part="items"]\r
{\r
    padding: 0;\r
    margin: 0;\r
    list-style: none;\r
\r
    display: grid;\r
    grid-template-columns: repeat(auto-fill, var(--item-width, minmax(0, 100px)));\r
    /* grid-column-gap: var(--column-gap, 1em);\r
    grid-row-gap: var(--row-gap, 1em); */\r
}\r
\r
\r
::slotted(:not([slot]))\r
{\r
    border: solid 1px transparent;\r
    margin: 3px 7px;\r
}\r
\r
::slotted(:not([slot]):focus)\r
{\r
    border-color: rgb(205 205 205);\r
}\r
::slotted(:not([slot]):hover)\r
{\r
    background-color: var(--background-color-hover, rgb(221, 221, 221));\r
}\r
::slotted(:not([slot]).selected)\r
{\r
    background-color: var(--background-color-selected, highlight);\r
    color: var(--color-selected, highlighttext);\r
}\r
@media (prefers-color-scheme: dark) \r
{\r
    ::slotted(:not([slot]):hover)\r
    {\r
        --background-color-hover: rgb(197, 197, 197);\r
    }\r
}\r
\r
[part="add-button"]\r
{\r
    align-self: center;\r
    justify-self: flex-end;\r
    margin: .5em 1em;\r
}\r
\r
\r
@media (max-width: 800px) \r
{\r
    \r
}\r
@media (min-width: 800px) \r
{\r
    :host\r
    {\r
        display: grid;\r
        grid-template-columns: auto 1fr;\r
    }\r
}`;var p=`<nav id="navigation">\r
    <slot name="navigation-header">\r
        <header id="navigation-header" class="header">\r
            <slot name="navigation-header-content"></slot>\r
        </header>\r
    </slot>\r
    <selectable-items id="categories"><slot name="category"></slot></selectable-items>\r
</nav>\r
<div id="gallery">\r
    <slot name="header">\r
        <header id="gallery-header" class="header">\r
            <slot name="header-content"></slot>\r
            <slot name="add-button">\r
                <button id="add-button" class="button">\r
                    <slot name="add-button-content">\r
                        <span id="add-button-icon" class="icon">+</span>\r
                        <span id="add-button-label">Add Item</span>\r
                    </slot>\r
                </button>\r
            </slot>\r
        </header>\r
    </slot>\r
    <div id="items">\r
        <slot></slot>\r
    </div>\r
</div>`;var T=`:host { user-select: none; }
::slotted(*)
{
    user-select: none;
    cursor: pointer;
}
::slotted(:hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted([aria-selected])
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}`,v=new CSSStyleSheet;v.replaceSync(T);document.addEventListener("keydown",o=>{if(c.multipleModifierKeys.indexOf(o.code)>-1){c._multipleModifierActive=!0;return}});document.addEventListener("keyup",o=>{c.multipleModifierKeys.indexOf(o.code)>-1&&(c._multipleModifierActive=c.multipleModifierActive)});function E(o,e){let t=o.composedPath(),s;for(let l=0;l<t.length;l++){let n=t[l];if(n==e)break;n instanceof HTMLElement&&!(n instanceof HTMLSlotElement)&&(s=n)}return s}var b="selectable-items",c=class d extends HTMLElement{static observedAttributes=[];static _multipleModifierActive=!1;static multipleModifierKeys=["ShiftLeft","ShiftRight","ControlLeft","ControlRight"];static multipleModifierActive=!1;static selectKeys=["Enter","Space"];static selectedClassName="selected";selected=()=>{let e=this.querySelector("slot"),t=this;for(;e!=null;)t=e,e=e.querySelector("slot");return(t instanceof HTMLSlotElement?t.assignedElements():[...t.children]).filter(l=>l instanceof HTMLElement&&l.hasAttribute("aria-selected"))};constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<slot></slot>",this.shadowRoot.adoptedStyleSheets.push(v),this.addEventListener("keydown",e=>{if(d.selectKeys.indexOf(e.code)>-1){let t=E(e,this);if(t==null||this.#s(t)==!1)return;e.preventDefault(),this.selectItem(t)}}),this.addEventListener("click",e=>{let t=E(e,this);t==null||this.#s(t)==!1||this.selectItem(t)}),this.shadowRoot.querySelector("slot").addEventListener("slotchange",e=>{let t=e.target.assignedElements();for(let s=0;s<t.length;s++)t[s].hasAttribute("tabIndex")==!1&&t[s].setAttribute("tabIndex","0")})}selectItem(e){let t=this.getAttribute("multiple")??this.getAttribute("multi");return(d._multipleModifierActive==!1||t==null)&&[...(e.parentElement??this).children].reduce((l,n,i)=>(n.hasAttribute("aria-selected")&&l.push(n),l),new Array).forEach(l=>this.#t(l)),this.#e(e),this.selected()}#e(e){e.classList.add(this.getAttribute("selected-class-name")??d.selectedClassName),e.setAttribute("aria-selected","option")}#t(e){e.classList.remove(this.getAttribute("selected-class-name")??d.selectedClassName),e.removeAttribute("aria-selected")}#s(e){let t=new Set([e]),s=this.hasAttribute("multiple")||this.hasAttribute("multi");if(d._multipleModifierActive==!0&&s==!0)for(let n of this.selected())t.add(n);return this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,cancelable:!0,detail:{selected:Array.from(t)}}))}};customElements.get(b)==null&&customElements.define(b,c);var w=(o=>o)(w||{}),M=new CSSStyleSheet;M.replaceSync(f);var S="collection-browser",g=class o extends HTMLElement{static selectedClassName="selected";componentParts=new Map;getElement(e){if(this.componentParts.get(e)==null){let t=this.findElement(e);t!=null&&this.componentParts.set(e,t)}return this.componentParts.get(e)}findElement(e){return this.shadowRoot.getElementById(e)}get allowMultiSelect(){return this.hasAttribute("multi")||this.hasAttribute("multiple")}#e;#t;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=p,this.shadowRoot.adoptedStyleSheets.push(M),this.#t=(e=>{let t=this.#e.assignedElements();if(t.length==1&&t[0]instanceof HTMLSlotElement){let s=t[0],l=s.assignedElements();for(;s instanceof HTMLSlotElement&&l[0]instanceof HTMLSlotElement;)s=l[0],s instanceof HTMLSlotElement&&(l=s.assignedElements());this.#s("default",s);return}}).bind(this),this.#e=this.shadowRoot.querySelector("slot:not([name])"),this.#e.addEventListener("slotchange",this.#t),this.shadowRoot.querySelector("selectable-items").addEventListener("change",e=>{e.preventDefault(),e.stopPropagation();let{selected:t}=e.detail,s=t[0],l=new CustomEvent("category",{cancelable:!0,detail:{selected:s}});if(this.dispatchEvent(l)==!1||s==null)return;e.target.selectItem(s);let i=s.dataset.category;if(i==null||i.trim()=="")return;this.dataset.category=i;let m=[...this.querySelectorAll(":not([slot])")];for(let h=0;h<m.length;h++){let r=m[h];if(r.classList.remove("has-category"),!(r.dataset.category==null||r.dataset.category.trim()==""))if(r.dataset.category==i)r.classList.add("has-category");else{let a=r.dataset.category.split(",");for(let u=0;u<a.length;u++)if(a[u]==i){r.classList.add("has-category");break}}}}),this.findElement("gallery").addEventListener("click",e=>{e.stopPropagation();let t=this.#e.assignedElements(),s=e.composedPath().find(a=>a instanceof Element&&t.indexOf(a)!=-1);if(s==null||!(s instanceof HTMLElement))return;let l=this.getSelected(),n=e.getModifierState("Shift"),i=e.getModifierState("Control"),m=e.getModifierState("Alt"),h=new CustomEvent("change",{cancelable:!0,detail:{newSelection:s,previousSelection:l,shift:n,ctrl:i,alt:m}});if(this.dispatchEvent(h)!=!1){if(this.allowMultiSelect==!1)for(let a=0;a<l.length;a++){let u=l[a];this.#l(u)}this.#o(s)}})}#s(e,t){if(e=="default"){this.#e!=null&&this.#e.removeEventListener("slotchange",this.#t),this.#e=t,this.#e.addEventListener("slotchange",this.#t);let s=this.#e.assignedElements();this.toggleAttribute("empty",s.length==0)}}getSelected(){return this.#e.assignedElements().reduce((t,s,l)=>(s.hasAttribute("aria-selected")&&t.push(s),t),new Array)}selectItems(...e){let t=this.#e.assignedElements();for(let s=0;s<e.length;s++){let l=e[s];t.indexOf(l)!=-1&&this.#n(l)}}#n(e){e.setAttribute("aria-selected","option"),e.classList.add(o.selectedClassName)}deselectItems(...e){let t=this.#e.assignedElements();for(let s=0;s<e.length;s++){let l=e[s];t.indexOf(l)!=-1&&this.#l(l)}}#l(e){e.removeAttribute("aria-selected"),e.classList.remove(o.selectedClassName)}#o(e){e.hasAttribute("aria-selected")?this.#l(e):this.#n(e)}clearSelection(){this.dispatchEvent(new CustomEvent("change",{detail:{newSelection:null,previousSelection:this.getSelected(),shift:!1,ctrl:!1,alt:!1}}))}};customElements.get(S)==null&&customElements.define(S,g);export{g as CollectionBrowserElement,w as CollectionBrowserParts};
