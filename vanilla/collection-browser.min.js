var f=`:host
{
    --border-color: rgb(205 205 205);

    display: grid;
    border: solid 1px var(--border-color);
}
@media (prefers-color-scheme: dark) 
{
    :host
    {
        --border-color: rgb(81 81 81);
    }
}

#navigation
{
    border-right: solid 1px var(--border-color);
}
#categories > ::slotted(*)
{
    padding: var(--category-padding, 5px 15px);
}

#gallery
{
    margin: 0;
    display: grid;
    grid-template-rows: auto 1fr;
    /* gap: 1em; */
    user-select: none;
    overflow: auto;
}

#gallery-header
{
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;

    border-bottom: solid 1px var(--border-color);
}

#items
{
    padding: 0;
    margin: 0;
    list-style: none;

    display: grid;
    grid-template-columns: repeat(auto-fill, var(--item-width, minmax(0, 100px)));
    /* grid-column-gap: var(--column-gap, 1em);
    grid-row-gap: var(--row-gap, 1em); */
}


::slotted(:not([slot]))
{
    border: solid 1px transparent;
    margin: 3px 7px;
}

::slotted(:not([slot]):focus)
{
    border-color: rgb(205 205 205);
}
::slotted(:not([slot]):hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted(:not([slot]).selected)
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:not([slot]):hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}

#add-button
{
    display: inline-flex;
    gap: 7px;
    align-items: center;
    justify-content: center;
    padding: 3px 7px;
    margin: 3px 7px;
    max-height: 80px;
    max-width: 100px;
}


@media (max-width: 800px) 
{
    
}
@media (min-width: 800px) 
{
    :host
    {
        display: grid;
        grid-template-columns: auto 1fr;
    }
}`;var p=`<nav id="navigation">
    <slot name="navigation-header">
        <header id="navigation-header" class="header">
            <slot name="navigation-header-content"></slot>
        </header>
    </slot>
    <selectable-items id="categories"><slot name="category"></slot></selectable-items>
</nav>
<div id="gallery">
    <slot name="header">
        <header id="gallery-header" class="header">
            <slot name="header-content"></slot>
        </header>
    </slot>
    <div id="items">
        <slot></slot>
        <slot name="add-button">
            <button id="add-button" class="button">
                <slot name="add-button-content">
                    <span id="add-button-icon" class="icon">+</span>
                    <span id="add-button-label">Add Item</span>
                </slot>
            </button>
        </slot>
    </div>
</div>`;var T=`:host { user-select: none; }
::slotted(*)
{
    user-select: none;
    cursor: pointer;
}
::slotted(:hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted([aria-selected])
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}`,v=new CSSStyleSheet;v.replaceSync(T);document.addEventListener("keydown",o=>{if(c.multipleModifierKeys.indexOf(o.code)>-1){c._multipleModifierActive=!0;return}});document.addEventListener("keyup",o=>{c.multipleModifierKeys.indexOf(o.code)>-1&&(c._multipleModifierActive=c.multipleModifierActive)});function E(o,e){let s=o.composedPath(),t;for(let l=0;l<s.length;l++){let n=s[l];if(n==e)break;n instanceof HTMLElement&&!(n instanceof HTMLSlotElement)&&(t=n)}return t}var b="selectable-items",c=class d extends HTMLElement{static observedAttributes=[];static _multipleModifierActive=!1;static multipleModifierKeys=["ShiftLeft","ShiftRight","ControlLeft","ControlRight"];static multipleModifierActive=!1;static selectKeys=["Enter","Space"];static selectedClassName="selected";selected=()=>{let e=this.querySelector("slot"),s=this;for(;e!=null;)s=e,e=e.querySelector("slot");return(s instanceof HTMLSlotElement?s.assignedElements():[...s.children]).filter(l=>l instanceof HTMLElement&&l.hasAttribute("aria-selected"))};constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<slot></slot>",this.shadowRoot.adoptedStyleSheets.push(v),this.addEventListener("keydown",e=>{if(d.selectKeys.indexOf(e.code)>-1){let s=E(e,this);if(s==null||this.#s(s)==!1)return;e.preventDefault(),this.selectItem(s)}}),this.addEventListener("click",e=>{let s=E(e,this);s==null||this.#s(s)==!1||this.selectItem(s)}),this.shadowRoot.querySelector("slot").addEventListener("slotchange",e=>{let s=e.target.assignedElements();for(let t=0;t<s.length;t++)s[t].hasAttribute("tabIndex")==!1&&s[t].setAttribute("tabIndex","0")})}selectItem(e){let s=this.getAttribute("multiple")??this.getAttribute("multi");return(d._multipleModifierActive==!1||s==null)&&[...(e.parentElement??this).children].reduce((l,n,a)=>(n.hasAttribute("aria-selected")&&l.push(n),l),new Array).forEach(l=>this.#t(l)),this.#e(e),this.selected()}#e(e){e.classList.add(this.getAttribute("selected-class-name")??d.selectedClassName),e.setAttribute("aria-selected","option")}#t(e){e.classList.remove(this.getAttribute("selected-class-name")??d.selectedClassName),e.removeAttribute("aria-selected")}#s(e){let s=new Set([e]),t=this.hasAttribute("multiple")||this.hasAttribute("multi");if(d._multipleModifierActive==!0&&t==!0)for(let n of this.selected())s.add(n);return this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,cancelable:!0,detail:{selected:Array.from(s)}}))}};customElements.get(b)==null&&customElements.define(b,c);var w=(o=>o)(w||{}),y=new CSSStyleSheet;y.replaceSync(f);var S="collection-browser",g=class o extends HTMLElement{static selectedClassName="selected";componentParts=new Map;getElement(e){if(this.componentParts.get(e)==null){let s=this.findElement(e);s!=null&&this.componentParts.set(e,s)}return this.componentParts.get(e)}findElement(e){return this.shadowRoot.getElementById(e)}get allowMultiSelect(){return this.hasAttribute("multi")||this.hasAttribute("multiple")}#e;#t;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=p,this.shadowRoot.adoptedStyleSheets.push(y),this.#o(),this.#t=(e=>{let s=this.#e.assignedElements();if(s.length==1&&s[0]instanceof HTMLSlotElement){let t=s[0],l=t.assignedElements();for(;t instanceof HTMLSlotElement&&l[0]instanceof HTMLSlotElement;)t=l[0],t instanceof HTMLSlotElement&&(l=t.assignedElements());this.#s("default",t);return}}).bind(this),this.#e=this.shadowRoot.querySelector("slot:not([name])"),this.#e.addEventListener("slotchange",this.#t),this.shadowRoot.querySelector("selectable-items").addEventListener("change",e=>{e.preventDefault(),e.stopPropagation();let{selected:s}=e.detail,t=s[0],l=new CustomEvent("category",{cancelable:!0,detail:{selected:t}});if(this.dispatchEvent(l)==!1||t==null)return;e.target.selectItem(t);let a=t.dataset.category;if(a==null||a.trim()=="")return;this.dataset.category=a;let m=[...this.querySelectorAll(":not([slot])")];for(let h=0;h<m.length;h++){let r=m[h];if(r.classList.remove("has-category"),!(r.dataset.category==null||r.dataset.category.trim()==""))if(r.dataset.category==a)r.classList.add("has-category");else{let i=r.dataset.category.split(",");for(let u=0;u<i.length;u++)if(i[u]==a){r.classList.add("has-category");break}}}}),this.findElement("gallery").addEventListener("click",e=>{e.stopPropagation();let s=this.#e.assignedElements(),t=e.composedPath().find(i=>i instanceof Element&&s.indexOf(i)!=-1);if(t==null||!(t instanceof HTMLElement))return;let l=this.getSelected(),n=e.getModifierState("Shift"),a=e.getModifierState("Control"),m=e.getModifierState("Alt"),h=new CustomEvent("change",{cancelable:!0,detail:{newSelection:t,previousSelection:l,shift:n,ctrl:a,alt:m}});if(this.dispatchEvent(h)!=!1){if(this.allowMultiSelect==!1)for(let i=0;i<l.length;i++){let u=l[i];this.#l(u)}this.#i(t)}})}#s(e,s){if(e=="default"){this.#e!=null&&this.#e.removeEventListener("slotchange",this.#t),this.#e=s,this.#e.addEventListener("slotchange",this.#t);let t=this.#e.assignedElements();this.toggleAttribute("empty",t.length==0)}}#o(){let e=[...this.shadowRoot.querySelectorAll("[id]")];for(let t=0;t<e.length;t++)e[t].part.add(e[t].id);let s=[...this.shadowRoot.querySelectorAll("[class]")];for(let t=0;t<s.length;t++)s[t].part.add(...s[t].classList)}getSelected(){return this.#e.assignedElements().reduce((s,t,l)=>(t.hasAttribute("aria-selected")&&s.push(t),s),new Array)}selectItems(...e){let s=this.#e.assignedElements();for(let t=0;t<e.length;t++){let l=e[t];s.indexOf(l)!=-1&&this.#n(l)}}#n(e){e.setAttribute("aria-selected","option"),e.classList.add(o.selectedClassName)}deselectItems(...e){let s=this.#e.assignedElements();for(let t=0;t<e.length;t++){let l=e[t];s.indexOf(l)!=-1&&this.#l(l)}}#l(e){e.removeAttribute("aria-selected"),e.classList.remove(o.selectedClassName)}#i(e){e.hasAttribute("aria-selected")?this.#l(e):this.#n(e)}clearSelection(){this.dispatchEvent(new CustomEvent("change",{detail:{newSelection:null,previousSelection:this.getSelected(),shift:!1,ctrl:!1,alt:!1}}))}};customElements.get(S)==null&&customElements.define(S,g);export{g as CollectionBrowserElement,w as CollectionBrowserParts};
