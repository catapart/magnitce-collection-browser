var f=`:host
{
    --border-color: rgb(205 205 205);

    display: grid;
    border: solid 1px var(--border-color);
}
@media (prefers-color-scheme: dark) 
{
    :host
    {
        --border-color: rgb(81 81 81);
    }
}

[part="navigation"]
{
    border-right: solid 1px var(--border-color);
}
[part="categories"] > ::slotted(*)
{
    padding: var(--category-padding, 5px 15px);
}

[part="gallery"]
{
    margin: 0;
    display: grid;
    grid-template-rows: auto 1fr;
    /* gap: 1em; */
    user-select: none;
    overflow: auto;
}

[part="header"]
{
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;

    border-bottom: solid 1px var(--border-color);
}

[part="items"]
{
    padding: 0;
    margin: 0;
    list-style: none;

    display: grid;
    grid-template-columns: repeat(auto-fill, var(--item-width, minmax(0, 100px)));
    /* grid-column-gap: var(--column-gap, 1em);
    grid-row-gap: var(--row-gap, 1em); */
}


::slotted(:not([slot]))
{
    border: solid 1px transparent;
    margin: 3px 7px;
}

::slotted(:not([slot]):focus)
{
    border-color: rgb(205 205 205);
}
::slotted(:not([slot]):hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted(:not([slot]).selected)
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:not([slot]):hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}

[part="add-button"]
{
    align-self: center;
    justify-self: flex-end;
    margin: .5em 1em;
}


@media (max-width: 800px) 
{
    
}
@media (min-width: 800px) 
{
    :host
    {
        display: grid;
        grid-template-columns: auto 1fr;
    }
}`;var p=`<nav id="navigation">
    <slot name="navigation-header">
        <header id="navigation-header" class="header">
            <slot name="navigation-header-content"></slot>
        </header>
    </slot>
    <selectable-items id="categories"><slot name="category"></slot></selectable-items>
</nav>
<div id="gallery">
    <slot name="header">
        <header id="gallery-header" class="header">
            <slot name="header-content"></slot>
            <slot name="add-button">
                <button id="add-button" class="button">
                    <slot name="add-button-content">
                        <span id="add-button-icon" class="icon">+</span>
                        <span id="add-button-label">Add Item</span>
                    </slot>
                </button>
            </slot>
        </header>
    </slot>
    <div id="items">
        <slot></slot>
    </div>
</div>`;var M=`:host { user-select: none; }
::slotted(*)
{
    user-select: none;
    cursor: pointer;
}
::slotted(:hover)
{
    background-color: var(--background-color-hover, rgb(221, 221, 221));
}
::slotted(.selected)
{
    background-color: var(--background-color-selected, highlight);
    color: var(--color-selected, highlighttext);
}
@media (prefers-color-scheme: dark) 
{
    ::slotted(:hover)
    {
        --background-color-hover: rgb(197, 197, 197);
    }
}`,v=new CSSStyleSheet;v.replaceSync(M);document.addEventListener("keydown",r=>{if(c.multipleModifierKeys.indexOf(r.code)>-1){c._multipleModifierActive=!0;return}});document.addEventListener("keyup",r=>{c.multipleModifierKeys.indexOf(r.code)>-1&&(c._multipleModifierActive=c.multipleModifierActive)});var E="selectable-items",c=class d extends HTMLElement{static observedAttributes=[];static _multipleModifierActive=!1;static multipleModifierKeys=["ShiftLeft","ShiftRight","ControlLeft","ControlRight"];static multipleModifierActive=!1;static selectKeys=["Enter","Space"];static selectedClassName="selected";selected=()=>[...this.querySelectorAll(`.${d.selectedClassName}`)];constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<slot></slot>",this.shadowRoot.adoptedStyleSheets.push(v),this.addEventListener("click",e=>{let s,t=e.composedPath();for(let l=0;l<t.length;l++){let n=t[l];n.parentElement==this&&(s=n.tagName=="SLOT"?n.assignedElements().find(o=>t.indexOf(o)>-1):n)}s!=null&&this.selectItem(s)}),this.addEventListener("keydown",e=>{d.selectKeys.indexOf(e.code)>-1&&(this.selectItem(e.target),e.preventDefault())}),this.shadowRoot.querySelector("slot").addEventListener("slotchange",e=>{let s=e.target.assignedElements();for(let t=0;t<s.length;t++)s[t].hasAttribute("tabIndex")||s[t].setAttribute("tabIndex","0")})}selectItem(e){let s=this.getAttribute("multiple")??this.getAttribute("multi");(d._multipleModifierActive==!1||s==null)&&[...(e.parentElement??this).children].reduce((l,n,o)=>(n.classList.contains(d.selectedClassName)&&l.push(n),l),new Array).forEach(l=>l.classList.remove(d.selectedClassName)),e.classList.add(d.selectedClassName),this.dispatchEvent(new Event("change"))}};customElements.get(E)==null&&customElements.define(E,c);var T=(r=>r)(T||{}),S=new CSSStyleSheet;S.replaceSync(f);var b="collection-browser",u=class r extends HTMLElement{static selectedClassName="selected";componentParts=new Map;getElement(e){if(this.componentParts.get(e)==null){let s=this.findElement(e);s!=null&&this.componentParts.set(e,s)}return this.componentParts.get(e)}findElement(e){return this.shadowRoot.getElementById(e)}get allowMultiSelect(){return this.hasAttribute("multi")||this.hasAttribute("multiple")}#e;#t;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=p,this.shadowRoot.adoptedStyleSheets.push(S),this.#o(),this.#t=(e=>{let s=this.#e.assignedElements();if(s.length==1&&s[0]instanceof HTMLSlotElement){let t=s[0],l=t.assignedElements();for(;t instanceof HTMLSlotElement&&l[0]instanceof HTMLSlotElement;)t=l[0],t instanceof HTMLSlotElement&&(l=t.assignedElements());this.#n("default",t);return}}).bind(this),this.#e=this.shadowRoot.querySelector("slot:not([name])"),this.#e.addEventListener("slotchange",this.#t),this.shadowRoot.querySelector("selectable-items").addEventListener("change",e=>{e.preventDefault(),e.stopPropagation();let{selected:s}=e.detail,t=s[0],l=new CustomEvent("category",{cancelable:!0,detail:{selected:t}});if(this.dispatchEvent(l)==!1||t==null)return;e.target.selectItem(t);let o=t.dataset.category;if(o==null||o.trim()=="")return;this.dataset.category=o;let g=[...this.querySelectorAll(":not([slot])")];for(let h=0;h<g.length;h++){let i=g[h];if(i.classList.remove("has-category"),!(i.dataset.category==null||i.dataset.category.trim()==""))if(i.dataset.category==o)i.classList.add("has-category");else{let a=i.dataset.category.split(",");for(let m=0;m<a.length;m++)if(a[m]==o){i.classList.add("has-category");break}}}}),this.findElement("gallery").addEventListener("click",e=>{e.stopPropagation();let s=this.#e.assignedElements(),t=e.composedPath().find(a=>a instanceof Element&&s.indexOf(a)!=-1);if(t==null||!(t instanceof HTMLElement))return;let l=this.getSelected(),n=e.getModifierState("Shift"),o=e.getModifierState("Control"),g=e.getModifierState("Alt"),h=new CustomEvent("change",{cancelable:!0,detail:{newSelection:t,previousSelection:l,shift:n,ctrl:o,alt:g}});if(this.dispatchEvent(h)!=!1){if(this.allowMultiSelect==!1)for(let a=0;a<l.length;a++){let m=l[a];this.#s(m)}this.#a(t)}})}#n(e,s){if(e=="default"){this.#e!=null&&this.#e.removeEventListener("slotchange",this.#t),this.#e=s,this.#e.addEventListener("slotchange",this.#t);let t=this.#e.assignedElements();this.toggleAttribute("empty",t.length==0)}}#o(){let e=[...this.shadowRoot.querySelectorAll("[id]")];for(let t=0;t<e.length;t++)e[t].part.add(e[t].id);let s=[...this.shadowRoot.querySelectorAll("[class]")];for(let t=0;t<s.length;t++)s[t].part.add(...s[t].classList)}getSelected(){return this.#e.assignedElements().reduce((s,t,l)=>(t.hasAttribute("aria-selected")&&s.push(t),s),new Array)}selectItems(...e){let s=this.#e.assignedElements();for(let t=0;t<e.length;t++){let l=e[t];s.indexOf(l)!=-1&&this.#l(l)}}#l(e){e.setAttribute("aria-selected","option"),e.classList.add(r.selectedClassName)}deselectItems(...e){let s=this.#e.assignedElements();for(let t=0;t<e.length;t++){let l=e[t];s.indexOf(l)!=-1&&this.#s(l)}}#s(e){e.removeAttribute("aria-selected"),e.classList.remove(r.selectedClassName)}#a(e){e.hasAttribute("aria-selected")?this.#s(e):this.#l(e)}clearSelection(){this.dispatchEvent(new CustomEvent("change",{detail:{newSelection:null,previousSelection:this.getSelected(),shift:!1,ctrl:!1,alt:!1}}))}};customElements.get(b)==null&&customElements.define(b,u);export{u as CollectionBrowserElement,T as CollectionBrowserParts};
